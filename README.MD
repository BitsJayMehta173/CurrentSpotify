# ğŸ§ Spotify Live Lyrics Tracker

A real-time Spotify playback monitor with fully synced lyrics from LRCLIB, powered by PKCE OAuth, async lyric fetch workers, fuzzy matching, and local caching.

This tool displays synchronized lyrics directly in your terminal while you listen on Spotify â€” no browser or GUI required.

## ğŸ“š Table of Contents

Introduction

Features

Requirements

Project Structure

Installation

Setup & Quick Start

Detailed Explanation

How Lyrics Are Fetched

Spotify Token Handling

Real-Time Optimizations

Troubleshooting


## ğŸ¤ Introduction

Spotify Live Lyrics Tracker monitors your current Spotify track, fetches lyrics from LRCLIB, and displays them in sync with playback.
It intelligently caches results, handles token refresh automatically, and performs fuzzy-matched lyric searches using asynchronous workers for speed and responsiveness.

### ğŸš€ Features 

#### Authentication & Session

ğŸ”‘ PKCE Spotify Authorization (no client secret needed)

ğŸ” Automatic token refresh

ğŸ’¾ Persistent session so you rarely reauthorize

#### Playback Monitoring

ğŸµ Real-time track polling

ğŸ•’ Seek detection

ğŸ”„ Instant track-switch handling

#### Lyric Fetching

âš¡ Asynchronous LRCLIB worker

ğŸ§  Fuzzy matching (rapidfuzz)

ğŸ“¦ Local JSON lyric cache

ğŸš€ Optimized timestamp lookups

#### Terminal Output

ğŸ“º Cross-platform console clear

ğŸ¶ Smooth synced line-by-line lyric display

### ğŸ“¦ Requirements

Install dependencies using:

```sh
pip install -r requirements.txt
```
Libraries:

requests

flask

rapidfuzz


### ğŸ“ Project Structure

```sh
spotify-live-lyrics/
â”‚
â”œâ”€â”€ tem.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ README.md
â”‚
â””â”€â”€ lyrics_cache/
```

### ğŸ”§ Installation

```sh
git clone <your-repo-url>
cd spotify-live-lyrics
pip install -r requirements.txt
```

### ğŸŸ¢ Setup & Quick Start

1. Install Dependencies

```sh
pip install -r requirements.txt
```

2. Run the Script
```sh
python spotify_now_playing_windows.py
```

Your browser will open â€” approve Spotify access (You Must be Logged In with your account).

3. Play Any Song on Spotify

The script will:

detect track changes

load cached lyrics OR fetch new ones

sync them in real time

### ğŸ“ Detailed Explanation
#### ğŸµ How Lyrics Are Fetched
1. Local Cache

Looks for:

```sh
lyrics_cache/Artist - Title.json
```

If found â†’ loads instantly.

2. Async Worker

If not cached, a background lyric worker fetches lyrics.
Old searches cancel instantly when tracks change.

3. Direct LRCLIB Query

Attempts perfect match using:
```sh
/api/get?track_name=...&artist_name=...
```

4. LRCLIB Search Fallback

Queries:

"title artist"\
"artist title"\
"title"\
"artist"\
"artist album"

Collects candidates.

5. Fuzzy Matching

Uses rapidfuzz WRatio to choose the best hit.

6. Parsing Lyrics

LRCLIB format:

[mm:ss.xx] text

Converted to JSON:

{
"time": "00:03.19",\
"seconds": 3.19,\
"line": "Some lyric"\
}

### ğŸ” Spotify Token Handling

You reauthorize only when:

spotify_session.json is deleted

refresh token fails

Spotify revokes access

### âš¡ Real-Time Optimizations

O(1) timestamp lookup

async worker avoids blocking

instant cancel on track change

zero playback-loop delay

### ğŸ›  Troubleshooting
Lyrics not found

LRCLIB metadata may differ. Fuzzy matching helps.

Authorization fails

Redirect URI must be:

http://127.0.0.1:8888/callback

Console doesnâ€™t clear

Windows: cls \
Linux/macOS: clear